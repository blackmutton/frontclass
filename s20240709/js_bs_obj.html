<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- css -->
    <style>

    </style>
</head>

<body>
    <div class="contaienr">
        <div class="row">
            <div class="col">
                <select name="" id="opt1" class="form-control">

                </select>
            </div>
            <div class="col">
                <select name="" id="opt2" class="form-control">
                </select>
            </div>
        </div>
    </div>





    <script>
        // 初始opt2 採用新北1
        function initFun() {
            console.log('init ok')
            let tmpKey = 0;
            let tmpAreaArr = data[tmpKey]['area'];
            console.log('tmpAreaArr', tmpAreaArr);

            let resultOpt2 = ``;
            tmpAreaArr.forEach(value => {
                resultOpt2 += `
                <option value="${value}">${value}</option>
                `;
            });
            console.log('opt2 value', resultOpt2)
            console.log('opt2', opt2)
            opt2.innerHTML = resultOpt2;
        }


        // 資料data
        let data = [
            {
                'id': 1,
                'name': '新北1',
                'area': ['11', '12', '13']
            },
            {
                'id': 2,
                'name': '台中2',
                'area': ['21', '22', '23']
            },
            {
                'id': 3,
                'name': '高雄3',
                'area': ['31', '32', '33']
            }
        ]

        // 綁定
        const opt1 = document.getElementById('opt1');
        const opt2 = document.getElementById('opt2');

        // data to opt1
        let resultOpt1 = '';
        // data to 前端
        data.forEach(value => {
            resultOpt1 += `
            <option value="${value.id}">${value.name}</option>
            `;
        })
        opt1.innerHTML = resultOpt1;

        // 初始化opt2

        initFun();

        // opt1 change action
        opt1.addEventListener('change', function () {
            let resultOpt2 = '';

            let tmpValue = opt1.value;
            console.log('tmpValue', tmpValue);
            let tmpKey = tmpValue - 1;
            tmpAreaArr = data[tmpKey]['area'];
            console.log('tmpAreaArr', tmpAreaArr);

            tmpAreaArr.forEach(value => {
                resultOpt2 += `
                <option value="${value}">${value}</option>
                `
            })
            opt2.innerHTML = resultOpt2;
        })

    </script>
</body>

</html>